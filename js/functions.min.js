var $window=$(window),gardenCtx,gardenCanvas,$garden,garden,clientWidth=$(window).width(),clientHeight=$(window).height();
$(function(){$loveHeart=$("#loveHeart");$loveHeart.width();$loveHeart.height();$garden=$("#garden");gardenCanvas=$garden[0];gardenCanvas.width=$loveHeart.width();gardenCanvas.height=$loveHeart.height();gardenCtx=gardenCanvas.getContext("2d");gardenCtx.globalCompositeOperation="lighter";garden=new Garden(gardenCtx,gardenCanvas);setInterval(function(){garden.render()},Garden.options.growSpeed);getSunsetSunrise(116.46,39.92)});
$(window).resize(function(){var a=$(window).width(),d=$(window).height();a!=clientWidth&&d!=clientHeight&&location.replace(location)});function getHeartPoint(a){a/=Math.PI;return[offsetX+312*Math.pow(Math.sin(a),3),offsetY+-20*(13*Math.cos(a)-5*Math.cos(2*a)-2*Math.cos(3*a)-Math.cos(4*a))]}
function startHeartAnimation(){var a=10,d=[],b=setInterval(function(){for(var c=getHeartPoint(a),e=!0,f=0;f<d.length;f++){var g=d[f];if(Math.sqrt(Math.pow(g[0]-c[0],2)+Math.pow(g[1]-c[1],2))<1.3*Garden.options.bloomRadius.max){e=!1;break}}e&&(d.push(c),garden.createRandomBloom(c[0],c[1]));30<=a?(clearInterval(b),showMessages()):a+=.2},50)}
(function(a){a.fn.typewriter=function(){this.each(function(){var d=a(this),b=d.html(),c=0;d.html("");var e=setInterval(function(){"<"===b.substr(c,1)?c=b.indexOf(">",c)+1:c++;d.html(b.substring(0,c)+(c&1?"_":""));c>=b.length&&clearInterval(e)},75)});return this}})(jQuery);
function timeElapse(a){a=(Date.parse(new Date)-Date.parse(a))/1E3;var d=Math.floor(a/86400);a%=86400;var b=Math.floor(a/3600);10>b&&(b="0"+b);a%=3600;var c=Math.floor(a/60);10>c&&(c="0"+c);a%=60;10>a&&(a="0"+a);a='<span class="digit">'+d+'</span> days <span class="digit">'+b+'</span> hours <span class="digit">'+c+'</span> minutes <span class="digit">'+a+"</span> seconds";$("#elapseClock").html(a)}function showMessages(){adjustWordsPosition();$("#messages").fadeIn(5E3,function(){showLoveU()})}
function adjustWordsPosition(){$("#words").css("position","absolute").css("top",195).css("left",70)}function adjustCodePosition(){$("#code").css("margin-top",($("#garden").height()-$("#code").height())/2)}function showLoveU(){$("#loveu").fadeIn(3E3)}
function switchColorTheme(a){a||(a=document.body.classList.contains("dark")?"light":"dark");"dark"===a?(document.body.classList.add("dark"),document.getElementById("words").classList.add("dark"),document.getElementById("code").classList.add("dark")):(document.body.classList.remove("dark"),document.getElementById("words").classList.remove("dark"),document.getElementById("code").classList.remove("dark"))}
function getSunsetSunrise(a,d){var b=new Date;$.get("https://api.sunrise-sunset.org/json",{lat:d,lng:a,date:b.getFullYear()+"-"+(b.getMonth()+1)+"-"+b.getDate(),formatted:0}).done(function(a){if("OK"===a.status){console.debug(a.results);var c=new Date(a.results.sunset);new Date(a.results.sunrise)<b&&b<c?switchColorTheme("light"):switchColorTheme("dark")}else 17<=b.getHours()||7>b.getHours.getHours()?switchColorTheme("dark"):switchColorTheme("light")}).fail(function(){17<=b.getHours()||7>b.getHours.getHours()?
switchColorTheme("dark"):switchColorTheme("light")})};
